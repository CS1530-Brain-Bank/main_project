<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Home</title>
	<!-- <script type="application/javascript" src="styleswitcher.js"></script> -->
	<link rel="stylesheet" type="text/css" href="default.css" title="Default" />
	<!-- <link rel="alternate stylesheet" type="text/css" href="blue.css" title="Blue" /> -->
</head>

<body>
	<div id="container">
		<a href="pictures.html">
			<div id="topleftbox">
				Pictures
				<div id="picturesimage"> <br /> </div>
			</div>
		</a>
		<a href="calendar.html">
			<div id="toprightbox">
				Calendar
				<div id="calenderimage"> <br /> </div>
			</div>
		</a>
		<a href="search.html">
			<div id="bottomleftbox">
				Search
				<div id="searchimage"> <br /> </div>
			</div>
		</a>
		<a href="contacts.html">
			<div id="bottomrightbox">
				
				Contacts
				<div id="contactsimage"> <br /> </div>
			</div>
		</a>
		<div id="welcomeuser">
			<div class="homepagetext">
				Welcome, <br />
				User!
			</div>
		</div>
		<div id="todolistbox">
			<div class="homepagetext">
				To-Do List:
				<div class="tasks"></div>
			</div>
		</div>
	</div>
</body>
</html>
<script>
	const getTasks = () => {
		var xhr = new XMLHttpRequest();
		xhr.open( "GET", "http://localhost:8082/displayTasks");
		xhr.onload = function( e ) {
			data = this.response;
			parsedData = JSON.parse(data);
			console.log(parsedData.uData);
			let tasks = "";
			let task = "";
			for (let i = 0; i < parsedData.uData.length; i++) {
				task = `
				<ul>
					<li>Name: ${parsedData.uData[i].name}</li>
					<li>Start Date: ${parsedData.uData[i].startDate}</li>
					<li>Start Time: ${parsedData.uData[i].startTime}</li>
					<li>End Time: ${parsedData.uData[i].endTime}</li>
					<li>Description: ${parsedData.uData[i].descr}</li>
				</ul>
				`
				tasks += {task};
			}
			document.querySelector('.tasks').innerHTML = tasks;
		};
		xhr.send();
	}
	window.onload = function() {
  	getTasks();
	}
</script>
